<!DOCTYPE html>
<html lang="en">

	<head>
		<meta charset="utf-8" />
		<title>部分入库单</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<link rel="stylesheet" href="../../../css/bootstrap.min.css" />
		<link rel="stylesheet" href="../../../css/ace.min.css" />
		<link rel="stylesheet" href="../../../css/style.css" />
		<link rel="stylesheet" href="../../../css/style_i.css" />
		<link rel="stylesheet" href="../../../font/css/font-awesome.min.css" />
		<link rel="stylesheet" href="../../../js/layer3.1.1/theme/default/layer.css" />
		<!--[if IE 7]>
		  <link rel="stylesheet" href="../../../font/css/font-awesome-ie7.min.css" />
		  <link rel="stylesheet" href="../../../css/ace-ie.min.css" />
		<![endif]-->

		<link rel="stylesheet" href="../../../css/mine/all.css" />
		<link rel="stylesheet" href="../../../css/mine/public.css" />

		<script src="../../../js/jquery-1.10.2.min.js"></script>
		<script src="../../../js/bootstrap.min.js"></script>
		<script src="../../../js/typeahead-bs2.min.js"></script>
		<script src="../../../js/jquery.dataTables.min.js"></script>
		<script src="../../../js/jquery.dataTables.bootstrap.js"></script>
		<script src="../../../js/layer3.1.1/layer.js" type="text/javascript"></script>
		<script src="../../../js/laydate/laydate.js" type="text/javascript"></script>
		<script src="../../../script/public.js" type="text/javascript"></script>
		<script src="../../../script/partOfWarehouse.js" type="text/javascript"></script>
		
		
		<style>
			#warehousingDiv>.container,#warehousingAllDiv>.container{
				margin:50px auto;
				line-height:50px
			}
			#warehousingDiv table th,#warehousingAllDiv table th{
				text-align: center;
			}
		</style>
	</head>

	<body class="content">
		<div class="page-content clearfix">
			<div id="Member_Ratings">
				<div class="d_Confirm_Order_style" style="margin-top:10px;">
					<h4 class="text-title">部分入库单</h4>
					<div class="search-div clearfix">
						<div class="clearfix">
							<span class="l_f"> 
							单号： <input type="text" value="" />
						</span>
							<span class="l_f"> 
							供应商名称： <input type="text" value="" />
						</span>
							<span class="l_f"> 
							货品名称： <input type="text"  value="" />
						</span>

							</span>
							<span class="r_f"> 
							<input type="button"  class="btncss btn_search" value="搜索" />
						</span>
						</div>

					</div>
					<div class="opration-div clearfix">
					</div>
					<div class="table_menu_list">
						<table class="table table-striped table-hover col-xs-12" id="datatable">
							<thead class="table-header">
								<tr>
									<th>单号</th>
									<th>供应商</th>
									<th>货品名称</th>
									<th>原始单价</th>
									<th>业务数量</th>
									<th>金额</th>
									<th>日期</th>
									<th>状态</th>
									<th width="25%">操作</th>
								</tr>

							</thead>
							<tbody>
								<tr>
									<td>
										<span class="look-span" onclick="purchaseOrderDetail()">PO.2017.09.00054</span>
									</td>
									<td>嘉和</td>
									<td>椒叶黄瓜</td>
									<td>9.8</td>
									<td>300</td>
									<td>2940</td>
									<td>2017.10.02</td>
									<td>未审核</td>
									<td>
										<input type="button" class="btncss edit" onclick="purchaseOrderDetail()" value="详情" />
										<input type="button" class="btncss edit" onclick="warehousing()" value="部分入库" />
										<input type="button" class="btncss edit" onclick="warehousingAll()" value="全部入库" />
									</td>
								</tr>
							</tbody>
						</table>
					</div>
				</div>
			</div>
		</div>

		<!--详情 -->
		<div id="lookDiv" style="display: none;">
			<form class="container">
				<div class="row jl-title">
					<span>基本信息</span>
				</div>
				<div class="row jl-panel">
					<div class="col-xs-6">
						<div class="form-group">
							<label for="" class="col-xs-4 control-label">日期：</label>
							<div class="col-xs-8">
								123456
							</div>
						</div>
						<div class="form-group">
							<label for="" class="col-xs-4 control-label">供应商：</label>
							<div class="col-xs-8">
								123456
							</div>
						</div>
						<div class="form-group">
							<label for="" class="col-xs-4 control-label">有效期至：</label>
							<div class="col-xs-8">
								123456
							</div>
						</div>
						<div class="form-group">
							<label for="" class="col-xs-4 control-label">合同号：</label>
							<div class="col-xs-8">
								123456
							</div>
						</div>
						<div class="form-group">
							<label for="" class="col-xs-4 control-label">到货时间：</label>
							<div class="col-xs-8">
								123456
							</div>
						</div>
						<div class="form-group">
							<label for="" class="col-xs-4 control-label">到货地址：</label>
							<div class="col-xs-8">
								123456
							</div>
						</div>
						<div class="form-group">
							<label for="" class="col-xs-4 control-label">订货人：</label>
							<div class="col-xs-8">
								123456
							</div>
						</div>
						
					</div>
					<div class="col-xs-6">
						<div class="form-group">
							<label for="" class="col-xs-4 control-label">运输方式：</label>
							<div class="col-xs-8">
								123456
							</div>
						</div>
						<div class="form-group">
							<label for="" class="col-xs-4 control-label">单号：</label>
							<div class="col-xs-8">
								123456
							</div>
						</div>
						
						<div class="form-group">
							<label for="" class="col-xs-4 control-label">送货人：</label>
							<div class="col-xs-8">
								123456
							</div>
						</div>
						<div class="form-group">
							<label for="" class="col-xs-4 control-label">传真：</label>
							<div class="col-xs-8">
								123456
							</div>
						</div>
						<div class="form-group">
							<label for="" class="col-xs-4 control-label">联系电话：</label>
							<div class="col-xs-8">
								123456
							</div>
						</div>
						<div class="form-group">
							<label for="" class="col-xs-4 control-label">付款方式：</label>
							<div class="col-xs-8">
								123456
							</div>
						</div>
						<div class="form-group">
							<label for="" class="col-xs-4 control-label">预付金额：</label>
							<div class="col-xs-8">
								123456
							</div>
						</div>
					</div>
				</div>
				<div class="row jl-title">
					<span>商品</span>
				</div>
				<div class="row jl-panel">
					<div class="col-xs-6">
						<div class="form-group">
							<label for="" class="col-xs-4 control-label">货品编码：</label>
							<div class="col-xs-8">
								123456
							</div>
						</div>
						<div class="form-group">
							<label for="" class="col-xs-4 control-label">货品名称：</label>
							<div class="col-xs-8">
								123456
							</div>
						</div>
						<div class="form-group">
							<label for="" class="col-xs-4 control-label">规格：</label>
							<div class="col-xs-8">
								123456
							</div>
						</div>
						<div class="form-group">
							<label for="" class="col-xs-4 control-label">品牌：</label>
							<div class="col-xs-8">
								123456
							</div>
						</div>
						<div class="form-group">
							<label for="" class="col-xs-4 control-label">单位：</label>
							<div class="col-xs-8">
								123456
							</div>
						</div>
						<div class="form-group">
							<label for="" class="col-xs-4 control-label">订货数量：</label>
							<div class="col-xs-8">
								123456
							</div>
						</div>
						<div class="form-group">
							<label for="" class="col-xs-4 control-label">到货数量：</label>
							<div class="col-xs-8">
								123456
							</div>
						</div>
						<div class="form-group">
							<label for="" class="col-xs-4 control-label">原始单价：</label>
							<div class="col-xs-8">
								123456
							</div>
						</div>
						<div class="form-group">
							<label for="" class="col-xs-4 control-label">折扣%：</label>
							<div class="col-xs-8">
								123456
							</div>
						</div>
						<div class="form-group">
							<label for="" class="col-xs-4 control-label">业务单价：</label>
							<div class="col-xs-8">
								123456
							</div>
						</div>
						
					</div>
					<div class="col-xs-6">
						
						<div class="form-group">
							<label for="" class="col-xs-4 control-label">税率：</label>
							<div class="col-xs-8">
								123456
							</div>
						</div>
						<div class="form-group">
							<label for="" class="col-xs-4 control-label">税额：</label>
							<div class="col-xs-8">
								123456
							</div>
						</div>
						<div class="form-group">
							<label for="" class="col-xs-4 control-label">价税合计：</label>
							<div class="col-xs-8">
								123456
							</div>
						</div>
						<div class="form-group">
							<label for="" class="col-xs-4 control-label">批号：</label>
							<div class="col-xs-8">
								123456
							</div>
						</div>
						<div class="form-group">
							<label for="" class="col-xs-4 control-label">中止数量：</label>
							<div class="col-xs-8">
								123456
							</div>
						</div>
						<div class="form-group">
							<label for="" class="col-xs-4 control-label">中止金额：</label>
							<div class="col-xs-8">
								123456
							</div>
						</div>
						<div class="form-group">
							<label for="" class="col-xs-4 control-label">赠品：</label>
							<div class="col-xs-8">
								123456
							</div>
						</div>
						<div class="form-group">
							<label for="" class="col-xs-4 control-label">备注：</label>
							<div class="col-xs-8">
								123456
							</div>
						</div>
						<div class="form-group">
							<label for="" class="col-xs-4 control-label">到货日期：</label>
							<div class="col-xs-8">
								123456
							</div>
						</div>
					</div>
				</div>
				
				
				<div class="row jl-title">
					<span>合计</span>
				</div>
				<div class="row jl-panel">
					<div class="col-xs-6">
						<div class="form-group">
							<label for="" class="col-xs-4 control-label">业务数量：</label>
							<div class="col-xs-8">
								123456
							</div>
						</div>
						<div class="form-group">
							<label for="" class="col-xs-4 control-label">税额：</label>
							<div class="col-xs-8">
								123456
							</div>
						</div>
					</div>
					<div class="col-xs-6">
						<div class="form-group">
							<label for="" class="col-xs-4 control-label">货款：</label>
							<div class="col-xs-8">
								123456
							</div>
						</div>
						<div class="form-group">
							<label for="" class="col-xs-4 control-label">金额：</label>
							<div class="col-xs-8">
								123456
							</div>
						</div>
					</div>
				</div>
				<div class="row jl-title">
					<span>其他</span>
				</div>
				<div class="row jl-panel">
					<div class="col-xs-6">
						<div class="form-group">
							<label for="" class="col-xs-4 control-label">部门：</label>
							<div class="col-xs-8">
								123456
							</div>
						</div>
						<div class="form-group">
							<label for="" class="col-xs-4 control-label">审核人：</label>
							<div class="col-xs-8">
								123456
							</div>
						</div>
						<div class="form-group">
							<label for="" class="col-xs-4 control-label">摘要：</label>
							<div class="col-xs-8">
								123456
							</div>
						</div>
					</div>
					<div class="col-xs-6">
						<div class="form-group">
							<label for="" class="col-xs-4 control-label">制单人：</label>
							<div class="col-xs-8">
								123456
							</div>
						</div>
						<div class="form-group">
							<label for="" class="col-xs-4 control-label">分支机构：</label>
							<div class="col-xs-8">
								123456
							</div>
						</div>
					</div>
				</div>

			</form>


		</div>
		
		
		
		
		<!--入库-->
		<div id="warehousingDiv" style="display: none;">
			<form action="" class="container">
				
				<div class="row jl-title">
					<span>
						入库 
					</span>
					<i class="r_f">
					<select>
						<option value="-1">请选择商品</option>
						<option value="2">2</option>
						<option value="3">3</option>
					</select>
					<input type="button" class="btncss jl-btn-importent" onclick="addWarehousingGoods(this)" value="添加入库商品" />
					</i>
				</div>
				
				<div class="row">
					<table class="table table-bordered table-striped table-hover col-xs-12" border="" cellspacing="0" cellpadding="0">
						<tbody>
						<tr>
							<th>商品编码</th><th>商品名称</th><th>仓库</th><th>数量</th><th>操作</th>
						</tr>
						<tr class="tiptr">
							<td colspan="5">请选择入库商品</td>
						</tr>
						</tbody>
					</table>
					
				</div>
			</form>
			
		</div>
		
		<!--全部入库-->
		<div id="warehousingAllDiv" style="display: none;">
			<form action="" class="container">
				
				<div class="row jl-title">
					<span>
						入库 
					</span>
					
				</div>
				
				<div class="row">
					<table class="table table-bordered table-striped table-hover col-xs-12" border="" cellspacing="0" cellpadding="0">
						<tbody>
						<tr>
							<th>商品编码</th><th>商品名称</th><th>仓库</th><th>数量</th>
						</tr>
						</tbody>
					</table>
					
				</div>
			</form>
			
		</div>
		
		
	</body>

	<script>
		let orderGoodsArray;
		$(function(){
			/*请通过ajax获得仓库数据*/
			orderGoodsArray = [{
				"id": 123,
				"name": "A仓库"
			}];
			
			
		})
		/*详情*/
		function purchaseOrderDetail() {
			layer.open({
				type: 1, 
				title: "部分入库单详情",
				closeBtn: 1,
				area: ['100%', '100%'],
				content: $("#lookDiv"),
				btn: ['关闭']
			});
		}
		
		
		/*引用出库单，部分入库*/
		function warehousing() {
				layer.open({
				type: 1,
				title: "入库",
				closeBtn: 1,
				area: ['100%', '100%'],
				content: $("#warehousingDiv"),
				btn: ['生成入库单','取消'],
				yes:function(index){
					layer.close(index);
					
					laysuccess("已生成入库单");
					clearForm("warehousingDiv","");
				},
				end: function(index, layero){
					layer.close(index);
					clearForm("warehousingDiv","");
  				}
			});
		}
		/*引用出库单，全部入库*/
		function warehousingAll() {
			
			/*请提供需要入库的全部商品*/
			let warehousingAllGoodsArr=[{
				"id":"121",
				"name":"4545"
			}];
			appendallGoods(warehousingAllGoodsArr);
			
			
			layer.open({
				type: 1,
				title: "全部入库",
				closeBtn: 1,
				area: ['100%', '100%'],
				content: $("#warehousingAllDiv"),
				btn: ['生成入库单','取消'],
				yes:function(index){
					layer.close(index);
					
					laysuccess("已生成入库单");
					clearForm("warehousingAllDiv","");
				},
				end: function(index, layero){
					layer.close(index);
					clearForm("warehousingAllDiv","");
  				}
			});
		}
		
		
		function appendallGoods(goodsarr){
			for(let i=0;i<goodsarr.length;i++){
				let $tr = `<tr><td>` + goodsarr[i]["id"] + `</td><td>` + goodsarr[i]["name"] + `</td><td>`;
				let $select=toWarehouse(orderGoodsArray);
				$tr = $tr + $select + `</td><td><input type="text" class="form-control"  value=""/></td></tr>`;
				$("#warehousingAllDiv table tbody").append($tr);				
			}
		}
			
		function toWarehouse(jsonArr){
			let selectStr='<select class="form-control"><option value="-1">请选择 </option>';
				
			for(let i=0;i<jsonArr.length;i++) {
				selectStr += `<option value="` + jsonArr[i]["id"] + `">` + jsonArr[i]["name"] + ` </option>`;
			}
			selectStr +='</select>';
			return selectStr;
		}
		
	</script>

</html>